// Generated by CoffeeScript 1.10.0
(function() {
  var dbAdapter;

  dbAdapter = (function() {
    var Firebird;

    Firebird = require('node-firebird');

    function dbAdapter() {
      console.log("Create object dbAdapter");
    }

    dbAdapter.prototype.send = function(list, callback) {
      var commit, i, len, obj;
      commit = this.commit;
      for (i = 0, len = list.length; i < len; i++) {
        obj = list[i];
        this.prepareStatement(obj, function(st) {
          var error;
          console.log(st.statement);
          if (st.err) {
            error = "Can't send object to db";
            console.log(error);
            return callback({
              err: error
            });
          } else {
            commit(obj, function(err) {
              if (err) {
                error = "Commit to db failed";
                console.log(error);
                return callback({
                  err: error
                });
              } else {
                return callback();
              }
            });
          }
        });
      }
    };

    dbAdapter.prototype.prepareStatement = function(obj, callback) {
      var error;
      if (true) {
        return callback({
          statement: 'INSERT AAA'
        });
      } else {
        error = 'Prepare statement error';
        console.log(error);
        return callback({
          err: error
        });
      }
    };

    dbAdapter.prototype.commit = function(obj, callback) {
      var error;
      if (true) {
        return callback();
      } else {
        error = "Commit error";
        console.log(error);
        return callback({
          err: error
        });
      }
    };

    return dbAdapter;

  })();

  module.exports = dbAdapter;

}).call(this);

//# sourceMappingURL=dbAdapter.js.map
